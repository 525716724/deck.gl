(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"7ZmC":function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(j){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,i),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var l={};function f(){}function d(){}function h(){}var p={};p[o]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(S([])));y&&y!==t&&r.call(y,o)&&(p=y);var m=h.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(o,a){function i(){return new t((function(n,i){!function n(o,a,i,c){var s=u(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=m.constructor=h,h.constructor=d,d.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(b.prototype),b.prototype[a]=function(){return this},e.AsyncIterator=b,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new b(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(m),c(m,i,"Generator"),m[o]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},"i+OJ":function(e,t,r){"use strict";r.r(t);var n=r("dI71"),o=r("q1tI"),a=r.n(o),i=r("lxDd"),c=r("o0o1"),s=r.n(c),u=(r("7ZmC"),r("HaE+")),l=r("rePB");r("wcNg");function f(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h={layers:{},layerFilter:{},parameters:{},effects:{},pickingRadius:{},onBeforeRender:{},onAfterRender:{},onClick:{},onHover:{},onDragStart:{},onDrag:{},onDragEnd:{},onError:{},debug:{},drawPickingColors:{},getCursor:{},getTooltip:{}};var p=r("sY70"),v=r("SOuN"),y=r("8nqg"),m=r("oFBv"),g=r("XQ8I");function b(e){var t=this;Object(v.h)(e),this.buffer=new y.a(e,new Int8Array([-1,-1,1,-1,-1,1,1,1])),this.model=new m.a(e,{vs:"\n      attribute vec2 a_pos;\n      varying vec2 v_texcoord;\n      void main(void) {\n          gl_Position = vec4(a_pos, 0.0, 1.0);\n          v_texcoord = (a_pos + 1.0) / 2.0;\n      }\n    ",fs:"\n      precision mediump float;\n      uniform sampler2D u_texture;\n      varying vec2 v_texcoord;\n      void main(void) {\n          vec4 rgba = texture2D(u_texture, v_texcoord);\n          rgba.rgb *= rgba.a;\n          gl_FragColor = rgba;\n      }\n    ",attributes:{a_pos:this.buffer},vertexCount:4,drawMode:e.TRIANGLE_STRIP}),this.deckFbo=new g.a(e,{width:1,height:1}),this.deckInstance=new p.a({viewState:{},controller:!1,gl:e,parameters:{depthTest:!0},_framebuffer:this.deckFbo,width:null,height:null,_customRender:function(e){"arcgis"===e?t.deckInstance._drawLayers(e):t.redraw()}})}function w(e){var t=this,r=e.gl,n=e.width,o=e.height,a=e.viewState,i=r.getParameter(r.FRAMEBUFFER_BINDING),c=window.devicePixelRatio;n=Math.round(n*c),o=Math.round(o*c),this.deckFbo.resize({width:n,height:o}),this.deckInstance.setProps({viewState:a}),this.deckInstance.redraw("arcgis"),Object(v.o)(r,{blend:!0,blendFunc:[r.ONE,r.ONE_MINUS_SRC_ALPHA],framebuffer:i,viewport:[0,0,n,o]},(function(){t.model.setUniforms({u_texture:t.deckFbo}).draw()}))}function x(){this.deckInstance&&(this.deckInstance.finalize(),this.deckInstance=null),this.model&&this.model.delete(),this.buffer&&this.buffer.delete(),this.deckFbo&&this.deckFbo.delete()}var k=r("iJYz");function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=null;function j(e,t){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(t)?null:t,e.next=3,I(n,r);case 3:if(!Array.isArray(t)){e.next=5;break}return e.abrupt("return",Object(k.loadModules)(t,r).then((function(e){return S(S({},P),{},{modules:e})})));case 5:return e.abrupt("return",P);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return P||(e?T(e.layers.Layer,e.core.Accessor,e.views["2d"].layers.BaseLayerViewGL2D,e.views["3d"].externalRenderers):Object(k.loadModules)(["esri/layers/Layer","esri/core/Accessor","esri/views/2d/layers/BaseLayerViewGL2D","esri/views/3d/externalRenderers"],t).then((function(e){return T(e[0],e[1],e[2],e[3])})))}function T(e,t,r,n){var o=function(e){return e.createSubclass({properties:h,constructor:function(){var e=this;this._callbacks={},this.watch(Object.keys(h),(function(t,r,n){var o;e.emit("change",((o={})[n]=t,o))}))},on:function(e,t){this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push(t)},emit:function(e,t){var r=this._callbacks[e];if(r)for(var n,o=f(r);!(n=o()).done;){(0,n.value)(t)}},toJSON:function(){for(var e,t={},r=f(this.keys());!(e=r()).done;){var n=e.value;void 0!==this[n]&&(t[n]=this[n])}return t}})}(t),a=function(e,t,r){return t.createSubclass({properties:{deck:{}},constructor:function(){this.deck=new e},createLayerView:function(e){return"2d"===e.type?new r({view:e,layer:this}):(console.error("DeckLayer does not support SceneView at the moment. Use DeckRenderer instead."),null)}})}(o,e,function(e){return e.createSubclass({properties:{deckgl:{},deckFbo:{},model:{},buffer:{}},attach:function(){var e=this,t=this.context;b.call(this,t),this.layer.deck.on("change",(function(t){return e.deckInstance.setProps(t)})),this.deckInstance.setProps(this.layer.deck.toJSON())},redraw:function(){this.requestRender()},detach:function(){x.call(this)},render:function(e){var t=this.view.state.size,r=t[0],n=t[1],o=e.state;w.call(this,{gl:e.context,width:r,height:n,viewState:{latitude:this.view.center.latitude,longitude:this.view.center.longitude,zoom:this.view.featuresTilingScheme.scaleToLevel(o.scale),bearing:-o.rotation,pitch:0}})}})}(r)),i=function(e,t){return function(){function r(t,r){this.view=t,this.deck=new e(r)}var n=r.prototype;return n.setup=function(e){var t=this,r=e.gl;b.call(this,r),this.deck.on("change",(function(e){return t.deckInstance.setProps(e)})),this.deckInstance.setProps(this.deck.toJSON())},n.dispose=function(){x.call(this)},n.redraw=function(){t.requestRender(this.view)},n.render=function(e){var t,r,n,o,a=this.view.size,i=a[0],c=a[1];w.call(this,{gl:e.gl,width:i,height:c,viewState:{latitude:this.view.center.latitude,longitude:this.view.center.longitude,altitude:(t=this.view.camera.fov,r=i/c,n=Math.sqrt(1+Math.pow(r,2)),o=t/2/180*Math.PI,n/2/Math.tan(o)),zoom:this.view.zoom,bearing:this.view.camera.heading,pitch:this.view.camera.tilt}})},r}()}(o,n);return P={DeckLayer:a,DeckRenderer:i}}var L=r("49Am"),A=r("p1p/"),_=r("KQm4"),D=r("SDD5"),C=r("FlnL"),M=2,N="mesh",U="I3S",F=r("1OyB"),R=r("vuIU"),G=r("DUak");function z(e){var t=e.halfSize,r=C.a.WGS84.cartographicToCartesian(e.center),n=(new G.b).fromCornerPoints([r[0]-t[0],r[1]-t[1],r[2]-t[2]],[r[0]+t[0],r[1]+t[1],r[2]+t[2]]);return[].concat(Object(_.a)(e.center),[n.radius])}function B(e){return q.apply(this,arguments)}function q(){return(q=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse((new TextDecoder).decode(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=B(t),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V={id:"i3s-node-page",name:"I3S Node Page",version:"2.3.13",mimeTypes:["application/json"],parse:function(e){return J.apply(this,arguments)},extensions:["json"],options:{}};function H(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y=function(){function e(t,r){Object(F.a)(this,e),this.tileset=t,this.nodesPerPage=t.nodePages.nodesPerPage,this.lodSelectionMetricType=t.nodePages.lodSelectionMetricType,this.options=r,this.nodePages=[]}var t,r;return Object(R.a)(e,[{key:"getNodeById",value:(r=Object(u.a)(s.a.mark((function e(t){var r,n,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Math.floor(t/this.nodesPerPage),this.nodePages[r]){e.next=7;break}return n="".concat(this.tileset.url,"/nodepages/").concat(r),this.nodePages[r]=Object(A.a)(n,V,this.options),e.next=6,this.nodePages[r];case 6:this.nodePages[r]=e.sent;case 7:if(!(this.nodePages[r]instanceof Promise)){e.next=11;break}return e.next=10,this.nodePages[r];case 10:this.nodePages[r]=e.sent;case 11:return o=t%this.nodesPerPage,e.abrupt("return",this.nodePages[r].nodes[o]);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"formTileFromNodePages",value:(t=Object(u.a)(s.a.mark((function e(t){var r,n,o,a,i,c,u,l,f,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNodeById(t);case 2:r=e.sent,n=[],o=H(r.children),e.prev=5,o.s();case 7:if((a=o.n()).done){e.next=15;break}return i=a.value,e.next=11,this.getNodeById(i);case 11:c=e.sent,n.push({id:i,obb:c.obb,mbs:z(c.obb)});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),o.e(e.t0);case 20:return e.prev=20,o.f(),e.finish(20);case 23:return u=null,l=null,r&&r.mesh&&(r.mesh.geometry&&(u="".concat(this.tileset.url,"/nodes/").concat(r.mesh.geometry.resource,"/geometries/0")),(f=this._getTextureName(r.mesh.material))&&(l="".concat(this.tileset.url,"/nodes/").concat(r.mesh.material.resource,"/textures/").concat(f))),d=[],"maxScreenThresholdSQ"===this.lodSelectionMetricType&&d.push({metricType:"maxScreenThreshold",maxError:Math.sqrt(r.lodThreshold/(.25*Math.PI))}),d.push({metricType:this.lodSelectionMetricType,maxError:r.lodThreshold}),e.abrupt("return",K({id:t,lodSelection:d,obb:r.obb,mbs:z(r.obb),contentUrl:u,textureUrl:l,children:n}));case 30:case"end":return e.stop()}}),e,this,[[5,17,20,23]])}))),function(e){return t.apply(this,arguments)})},{key:"_getTextureName",value:function(e){if(e){var t=this.tileset.materialDefinitions[e.definition],r=t&&t.pbrMetallicRoughness&&t.pbrMetallicRoughness.baseColorTexture&&t.pbrMetallicRoughness.baseColorTexture.textureSetDefinitionId;if(r||0===r){var n=this.tileset.textureSetDefinitions[r];return n&&n.formats&&n.formats[0]&&n.formats[0].name}}return null}}]),e}();function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"".concat(e,"?token=").concat(t):e}var Q=new D.a;function Z(e,t,r){return e.url=r.url,e.featureData&&(e.featureUrl="".concat(e.url,"/").concat(e.featureData[0].href)),e.geometryData&&(e.contentUrl="".concat(e.url,"/").concat(e.geometryData[0].href)),e.textureData&&(e.textureUrl="".concat(e.url,"/").concat(e.textureData[0].href)),K(e)}function K(e){Q.copy(e.mbs);var t=C.a.WGS84.cartographicToCartesian(e.mbs.slice(0,3));return e.boundingVolume={sphere:[].concat(Object(_.a)(t),[e.mbs[3]])},e.lodMetricType=e.lodSelection[0].metricType,e.lodMetricValue=e.lodSelection[0].maxError,e.transformMatrix=e.transform,e.type=N,e.refine=M,e}function X(e,t,r){return ee.apply(this,arguments)}function ee(){return(ee=Object(u.a)(s.a.mark((function e(t,r,n){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url=n.url,!t.nodePages){e.next=8;break}return t.nodePagesTile=new Y(t,r),e.next=5,t.nodePagesTile.formTileFromNodePages(0);case 5:t.root=e.sent,e.next=12;break;case 8:return o=$("".concat(t.url,"/nodes/root"),r.token),e.next=11,Object(A.a)(o,t.loader,{i3s:{loadContent:!1,isTileHeader:!0,isTileset:!1}});case 11:t.root=e.sent;case 12:t.basePath=t.url,t.type=U,t.lodMetricType=t.root.lodMetricType,t.lodMetricValue=t.root.lodMetricValue;case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=r("kh/P"),re=r("kEPd"),ne=r("0mpS"),oe={UInt8:Uint8Array,UInt16:Uint16Array,UInt32:Uint32Array,Float32:Float32Array,UInt64:Float64Array},ae={UInt8:ne.a.UNSIGNED_BYTE,UInt16:ne.a.UNSIGNED_INT,Float32:ne.a.FLOAT,UInt32:ne.a.UNSIGNED_INT,UInt64:ne.a.DOUBLE},ie={position:"position",normal:"normal",uv0:"uv0",color:"color",region:"region"},ce={vertexAttributes:"vertexAttributes",featureAttributeOrder:"featureAttributeOrder",featureAttributes:"featureAttributes"},se="header",ue="vertexCount",le="featureCount",fe={UInt8:1,UInt16:2,UInt32:4,Float32:4,UInt64:8};function de(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return he(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pe=new D.a([0,0,0]);function ve(e,t,r,n){return ye.apply(this,arguments)}function ye(){return(ye=Object(u.a)(s.a.mark((function e(t,r,n,o){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.content=r.content||{},r.content.featureData=ge(r,n),r.content.attributes={},!r.textureUrl){e.next=8;break}return a=$(r.textureUrl,o.token),e.next=7,Object(A.a)(a,re.a);case 7:r.content.texture=e.sent;case 8:return e.abrupt("return",me(t,r));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.content)return t;var r=t.content,n=r.featureData,o=n.vertexAttributes,a=n.attributesOrder,i=be(r,e),c=i.vertexCount,s=i.byteOffset,u=we(e,s,o,c,a),l=u.attributes,f=xe(l.position,t),d=f.enuMatrix,h=f.cartographicOrigin,p=f.cartesianOrigin,v=(new te.a).multiplyRight(d);return r.attributes={positions:l.position,normals:l.normal,colors:l.color,texCoords:l.uv0},r.vertexCount=c,r.cartographicCenter=h,r.cartesianOrigin=p,r.modelMatrix=v.invert(),r.byteLength=e.byteLength,t}function ge(e,t){var r=t.store.defaultGeometrySchema,n=r;for(var o in ce)for(var a in ie){var i=r[o][a];if(i){var c=i.byteOffset,s=void 0===c?0:c,u=i.count,l=void 0===u?0:u,f=i.valueType,d=i.valuesPerElement;n[o][a]={valueType:f,valuesPerElement:d,byteOffset:s,count:l}}}return n.attributesOrder=r.ordering,n}function be(e,t){var r=0,n=0,o=0,a=e.featureData[se];for(var i in a){var c=a[i],s=c.property,u=c.type,l=oe[u];s===ue&&(n=new l(t,0,4)[0],r+=fe[u]),s===le&&(o=new l(t,4,4)[0],r+=fe[u])}return{vertexCount:n,featureCount:o,byteOffset:r}}function we(e,t,r,n,o){var a,i={},c=de(o);try{for(c.s();!(a=c.n()).done;){var s=a.value;if(r[s]){var u=r[s],l=u.valueType,f=u.valuesPerElement,d=n;if(t+d*f>e.byteLength)break;var h=new(0,oe[l])(e,t,d*f);switch(i[s]={value:h,type:ae[l],size:f},s){case"color":i.color.normalized=!0}t+=d*f*fe[l]}}}catch(p){c.e(p)}finally{c.f()}return{attributes:i,byteOffset:t}}function xe(e,t){var r=t.mbs,n=e.value,o=new te.a,a=new D.a(r[0],r[1],r[2]),i=new D.a;return C.a.WGS84.cartographicToCartesian(a,i),C.a.WGS84.eastNorthUpToFixedFrame(i,o),e.value=function(e,t){for(var r=new Float64Array(e.length),n=0;n<r.length;n+=3)r[n]=e[n]+t.x,r[n+1]=e[n+1]+t.y,r[n+2]=e[n+2]+t.z;for(var o=0;o<r.length;o+=3)C.a.WGS84.cartographicToCartesian(r.subarray(o,o+3),pe),r[o]=pe.x,r[o+1]=pe.y,r[o+2]=pe.z;return r}(n,a),{enuMatrix:o,fixedFrameToENUMatrix:o.invert(),cartographicOrigin:a,cartesianOrigin:i}}var ke=/layers\/[0-9]+$/,Oe=/nodes\/([0-9-]+|root)$/;function Se(e,t,r){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(u.a)(s.a.mark((function e(t,r,n){var o,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.i3s.tile,a=r.i3s.tileset,o.content=o.content||{},e.next=5,ve(t,o,a,r);case 5:return e.abrupt("return",o.content);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e,t,r){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(u.a)(s.a.mark((function e(t,r,n){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=JSON.parse((new TextDecoder).decode(t))).loader=Le,e.next=4,X(o,r,n);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t,r){return Te.apply(this,arguments)}function Te(){return(Te=Object(u.a)(s.a.mark((function e(t,r,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse((new TextDecoder).decode(t)),e.abrupt("return",Z(t,0,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Le={id:"i3s",name:"I3S 3D Tiles",version:"2.3.13",mimeTypes:["application/octet-stream"],parse:function(e,t,r,n){return Ae.apply(this,arguments)},extensions:["bin"],options:{i3s:{loadContent:!0,isTileset:"auto",isTileHeader:"auto",tile:null,tileset:null}}};function Ae(){return(Ae=Object(u.a)(s.a.mark((function e(t,r,n,o){var a,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new URL(n.url),r.i3s=r.i3s||{},i="auto"===r.i3s.isTileset?ke.test(a.pathname):r.i3s.isTileset,c="auto"===r.isTileHeader?Oe.test(a.pathname):r.i3s.isTileHeader,!i){e.next=10;break}return e.next=7,je(t,r,n);case 7:t=e.sent,e.next=23;break;case 10:if(!c){e.next=20;break}return e.next=13,Ie(t,r,n);case 13:if(t=e.sent,!r.i3s.loadContent){e.next=18;break}return r.i3s.tile=t,e.next=18,Object(A.a)(t.contentUrl,Le,r);case 18:e.next=23;break;case 20:return e.next=22,Se(t,r,n);case 22:t=e.sent;case 23:return e.abrupt("return",t);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _e=Le,De="https://tiles.arcgis.com/tiles/z2tnIkrLQ2BRzr6P/arcgis/rest/services/SanFrancisco_Bldgs/SceneServer/layers/0";function Ce(){return(Ce=Object(u.a)(s.a.mark((function e(t){var r,n,o,a,i,c,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(["esri/Map","esri/views/SceneView","esri/views/3d/externalRenderers"]);case 2:return r=e.sent,n=r.DeckRenderer,o=r.modules,a=o[0],i=o[1],c=o[2],u=new i({container:t,qualityProfile:"high",map:new a({basemap:"dark-gray-vector"}),environment:{atmosphereEnabled:!1},camera:{position:{x:-122.4,y:37.78,z:3e3},heading:0,tilt:25},viewingMode:"local"}),l=new n(u,{}),c.add(u,l),u.on("layerview-create",(function(){l.deck.layers=[new L.a({id:"tile-3d-layer",data:De,loader:_e})]})),e.abrupt("return",{remove:function(){u.destroy(),l.dispose()}});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Me=r("CtqP"),Ne=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this)._containerRef=Object(o.createRef)(),t}Object(n.a)(t,e),t.renderInfo=function(e){return a.a.createElement("div",null,a.a.createElement("p",null,"Highly detailed LoD2 textured 3D buildings for downtown San Francisco in I3S format, visualized with deck.gl's Tile3DLayer. This data is provided by ",a.a.createElement("a",{href:"https://www.precisionlightworks.com/"},"Precision Light Works (PLW)"),"."),a.a.createElement("div",null,a.a.createElement("img",{src:"http://downloads.esri.com/blogs/arcgisonline/esrilogo_new.png",alt:"ESRI logo"}),a.a.createElement("a",{href:"https://www.arcgis.com/home/item.html?id=d3344ba99c3f4efaa909ccfbcc052ed5"},"Data profile page")))};var r=t.prototype;return r.componentDidMount=function(){var e=this,t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href","https://js.arcgis.com/4.16/esri/themes/light/main.css"),document.head.appendChild(t),function(e){return Ce.apply(this,arguments)}(this._containerRef.current).then((function(t){return e._view=t}))},r.componentWillUnmount=function(){this._view&&this._view.remove()},r.render=function(){return a.a.createElement("div",{ref:this._containerRef,style:{width:"100%",height:"100%"}})},t}(o.Component);Ne.title="San Francisco 3D Buildings",Ne.code=i.b+"/examples/website/i3s";t.default=Object(Me.a)(Ne)},iJYz:function(e,t,r){!function(e){"use strict";function t(e){if("next"===e.toLowerCase())return"next";var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function r(e){return void 0===e&&(e="4.14"),"https://js.arcgis.com/"+e+"/"}function n(e){return!e||t(e)?function(e){void 0===e&&(e="4.14");var n=r(e),o=t(e);return"next"!==o&&3===o.major?n+(o.minor<=10?"js/":"")+"esri/css/esri.css":n+"esri/themes/light/main.css"}(e):e}function o(e,t){var r=n(e),o=function(e){return document.querySelector('link[href*="'+e+'"]')}(r);return o||function(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}(o=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(r),t),o}var a={Promise:"undefined"!=typeof window?window.Promise:void 0},i={};function c(e,t,r){var n;r&&(n=function(e,t){var r=function r(n){t(n.error||new Error("There was an error attempting to load "+e.src)),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}(e,r)),e.addEventListener("load",(function r(){t(e),e.removeEventListener("load",r,!1),n&&e.removeEventListener("error",n,!1)}),!1)}function s(e){void 0===e&&(e={}),i=e}function u(){return document.querySelector("script[data-esri-loader]")}function l(){var e=window.require;return e&&e.on}function f(e){void 0===e&&(e={});var t={};[i,e].forEach((function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}));var n=t.version,s=t.url||r(n);return new a.Promise((function(e,r){var a=u();if(a){var i=a.getAttribute("src");i!==s?r(new Error("The ArcGIS API for JavaScript is already loaded ("+i+").")):l()?e(a):c(a,e,r)}else if(l())r(new Error("The ArcGIS API for JavaScript is already loaded."));else{var f=t.css;f&&o(!0===f?n:f,t.insertCssBefore),t.dojoConfig&&(window.dojoConfig=t.dojoConfig),c(a=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(s),(function(){a.setAttribute("data-esri-loader","loaded"),e(a)}),r),document.body.appendChild(a)}}))}function d(e){return new a.Promise((function(t,r){var n=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n.remove(),t(e)}))}))}function h(e,t){if(void 0===t&&(t={}),l())return d(e);var r=u(),n=r&&r.getAttribute("src");return!t.url&&n&&(t.url=n),f(t).then((function(){return d(e)}))}var p={getScript:u,isLoaded:l,loadModules:h,loadScript:f,loadCss:o,setDefaultOptions:s,utils:a};e.getScript=u,e.isLoaded=l,e.loadModules=h,e.loadScript=f,e.loadCss=o,e.setDefaultOptions=s,e.utils=a,e.default=p,Object.defineProperty(e,"__esModule",{value:!0})}(t)}}]);